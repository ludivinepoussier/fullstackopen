(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{17:function(e,n,t){e.exports=t(41)},22:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(16),u=t.n(c),o=(t(22),t(6)),s=t(2),i=t.n(s),l=t(4),m=t(3),f=function(e){var n=e.addPerson,t=e.newName,a=e.handleNameChange,c=e.newNum,u=e.handleNumChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name:\xa0",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number:\xa0",r.a.createElement("input",{value:c,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var n=e.searchTerm,t=e.handleFilterChange;return r.a.createElement("input",{value:n,onChange:t})},h=function(e){var n=e.data,t=e.removePerson;return r.a.createElement("li",null,"".concat(n.name,": ").concat(n.num),"\xa0",r.a.createElement("button",{onClick:function(){return t(n.id)}},"delete"))},p=function(e){var n=e.persons,t=e.searchTerm,a=e.removePerson;return n.filter((function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())>=0})).map((function(e){return r.a.createElement(h,{key:e.name,data:e,removePerson:a})}))},v=t(5),b=t.n(v),w="http://localhost:3001/api/persons",E=function(){return b.a.get(w).then((function(e){return e.data}))},O=function(e){return b.a.post(w,e).then((function(e){return e.data}))},j=function(e){return b.a.delete("".concat(w,"/").concat(e)).then((function(e){return e.data}))},g=function(e,n){return b.a.put("".concat(w,"/").concat(e),n).then((function(e){return e.data}))},k=function(e){var n=e.message,t=e.success;if(null===n)return null;var a=t?"msgSuccess":"msgError";return r.a.createElement("div",{className:a},n)},x=function(){var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(m.a)(u,2),h=s[0],v=s[1],b=Object(a.useState)(""),w=Object(m.a)(b,2),x=w[0],C=w[1],y=Object(a.useState)(""),N=Object(m.a)(y,2),T=N[0],S=N[1],P=Object(a.useState)(null),L=Object(m.a)(P,2),D=L[0],F=L[1],J=Object(a.useState)(!0),A=Object(m.a)(J,2),B=A[0],I=A[1];Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var q=function(){var e=Object(l.a)(i.a.mark((function e(){var n,a,r,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.find((function(e){return e.name===x})),a=Object(o.a)(Object(o.a)({},n),{},{num:T}),e.prev=2,e.next=5,g(n.id,a);case 5:r=t.map((function(e){return e===n?a:e})),c(r),F("".concat(x," has been updated")),I(!0),setTimeout((function(){F(null)}),5e3),e.next=21;break;case 12:return e.prev=12,e.t0=e.catch(2),F("".concat(x," has already been removed from server")),I(!1),setTimeout((function(){F(null)}),5e3),e.next=19,E();case 19:u=e.sent,c(u);case 21:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(l.a)(i.a.mark((function e(n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a={name:x,num:T},!t.some((function(e){return e.name.toLowerCase()===x.toLowerCase()}))){e.next=8;break}window.confirm("".concat(x," is already added to phonebook, replace the old number with a new one?"))&&q(T),C(""),S(""),e.next=17;break;case 8:return e.next=10,O(a);case 10:r=e.sent,c(t.concat(r)),C(""),S(""),F("".concat(x," has been added")),I(!0),setTimeout((function(){F(null)}),5e3);case 17:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.find((function(e){return e.id===n})),!window.confirm("Delete ".concat(a.name," ?"))){e.next=20;break}return e.prev=2,e.next=5,j(n);case 5:c(t.filter((function(e){return e.id!==n}))),F("".concat(a.name," has been deleted")),I(!0),setTimeout((function(){F(null)}),5e3),e.next=20;break;case 11:return e.prev=11,e.t0=e.catch(2),F("".concat(a.name," has already been removed from server")),I(!1),setTimeout((function(){F(null)}),5e3),e.next=18,E();case 18:r=e.sent,c(r);case 20:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(n){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(k,{message:D,success:B}),r.a.createElement(d,{searchTerm:h,handleFilterChange:function(e){v(e.target.value)}}),r.a.createElement("h3",null,"Add a new contact"),r.a.createElement(f,{addPerson:z,newName:x,handleNameChange:function(e){C(e.target.value)},newNum:T,handleNumChange:function(e){S(e.target.value)}}),r.a.createElement("h2",null,"Contact List"),r.a.createElement("ul",null,r.a.createElement(p,{persons:t,searchTerm:h,removePerson:G})))};u.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.714002e1.chunk.js.map